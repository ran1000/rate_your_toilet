<% favorite = current_user.favorites.find_by(toilet: @toilet) %>
<h1>🚽 <%= @toilet.name %></h1>
<h2>🏡 <%= @toilet.address %></h1>
<div class ="d-inline-block">
  <% if favorite.nil? %>
    <p>
      <%= pluralize(@toilet.favorites.count, 'person') %> saved this toilet
      
      <%= button_to "♡", toilet_favorites_path(@toilet), params: { favorite: { toilet_id: @toilet.id }}, method: :post, class: "btn btn-primary m-3" %>
    </p>
  <% else %>
    <p>
      You and <%= pluralize(@toilet.favorites.count - 1, 'person') %> saved this toilet
      <%= link_to "♥", delete_favorite_path(favorite), data: { turbo_method: :delete }, class: "btn btn-primary m-3"  %>
    </p>
  <% end %>
</div>



<% if favorite.nil? %>
  <%= button_to "♡", toilet_favorites_path(@toilet), params: { favorite: { toilet_id: @toilet.id }}, method: :post, class: "btn btn-primary m-3" %>
<% else %>
  <%= link_to "♥", delete_favorite_path(favorite), data: { turbo_method: :delete }, class: "btn btn-primary m-3"  %>
<% end %>

<%= render "allphotos", locals: { pictures: @pictures } %>


<h2>Reviews:</h2>
<em><%= render "/reviews/index", reviews: @toilet.reviews %></em>
<em><%= render "/reviews/form", toilet: @toilet, review: @review %></em>

<% if policy(@toilet).destroy? %>
  <%= link_to "Delete Toilet", delete_toilet_path(@toilet), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: "btn btn-danger m-3" %>
<% end %>
<% if policy(@toilet).update? %>
  <%= link_to "Update Toilet", edit_toilet_path(@toilet), class: "btn btn-danger m-3" %>
<% end %>
